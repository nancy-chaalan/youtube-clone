(self.webpackChunkyoutube=self.webpackChunkyoutube||[]).push([[163],{163:(Z,M,_)=>{"use strict";_.r(M),_.d(M,{VideosModule:()=>D});var O=_(6895),b=_(5479),t=_(8274),a=_(414);let l=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-allvideos-sh"]],decls:1,vars:0,template:function(c,f){1&c&&t._UZ(0,"app-allvideos")},dependencies:[a.q]})}return s})();var v=_(559);function h(s,y){if(1&s){const u=t.EpF();t.TgZ(0,"a",2)(1,"div",3)(2,"div",4)(3,"img",5),t.NdJ("click",function(){const w=t.CHM(u).$implicit,p=t.oxw();return t.KtG(p.moveToRouteWithIndex("videos/view",w.id))}),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.qZA()(),t.TgZ(6,"div",7)(7,"a",8),t.NdJ("click",function(){const w=t.CHM(u).$implicit,p=t.oxw();return t.KtG(p.moveToRouteWithIndex("videos/view",w.id))}),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()()()}if(2&s){const u=y.$implicit;t.xp6(3),t.s9C("src",u.img,t.LSH),t.xp6(2),t.Oqu(u.videoTime),t.xp6(3),t.Oqu(u.title),t.xp6(2),t.AsE("",u.channelName," - ",u.views," views")}}let g=(()=>{class s{constructor(u,c){this.service=u,this.router=c,this.alllvideos=this.service.allVideos}moveToRouteWithIndex(u,c){this.router.navigate([u],{queryParams:{id:c}}).then(()=>window.scrollTo(0,0))}static#t=this.\u0275fac=function(c){return new(c||s)(t.Y36(v.B),t.Y36(b.F0))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-rightbarvideos"]],decls:2,vars:1,consts:[["id","sidebar"],["class","wholeBox",4,"ngFor","ngForOf"],[1,"wholeBox"],[1,"row"],["id","imgDiv",1,"col-xl-4","col-lg-4","col-md-6","col-sm-12"],["alt","",3,"src","click"],[1,"bottom-right"],["id","texts",1,"col-xl-8","col-lg-8","col-md-6","col-sm-12"],[3,"click"]],template:function(c,f){1&c&&(t.TgZ(0,"div",0),t.YNc(1,h,11,5,"a",1),t.qZA()),2&c&&(t.xp6(1),t.Q6J("ngForOf",f.alllvideos))},dependencies:[O.sg],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}#sidebar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#2B2F53 0%,#1D1C34 34%);overflow-x:hidden;overflow-y:scroll;scroll-behavior:smooth;padding-left:10px}#imgDiv[_ngcontent-%COMP%]{position:relative;color:#fff;border-top-left-radius:10px;border-bottom-left-radius:10px}.bottom-right[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:22px;background:#000;padding:5px;border-radius:8px;font-size:small}.wholeBox[_ngcontent-%COMP%]{cursor:pointer;margin:3px;box-shadow:10px 10px 20px 10px #0000001a;text-decoration:none;border-radius:10px 15px 15px 10px}.row[_ngcontent-%COMP%]   #imgDiv[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:100%;height:100px;border-top-left-radius:10px;border-bottom-left-radius:10px}.row[_ngcontent-%COMP%]   #texts[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px}.row[_ngcontent-%COMP%]   .col-xl-8[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;color:#fff}.row[_ngcontent-%COMP%]   .col-xl-8[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:none;color:#6a6a6a}.row[_ngcontent-%COMP%]{background:linear-gradient(168deg,#2E335A 0%,#444262 100%);margin-right:8px;border-radius:15px;box-shadow:0 4px 20px #2c00a633;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out}.row[_ngcontent-%COMP%]:hover{background:linear-gradient(168deg,#2E335A 0%,#837cdb 100%);transform:scale(1.01);box-shadow:4px 4px 8px #cb0dff1a}@media (max-width: 998px){#texts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:14px}}"]})}return s})();var n=_(4006),i=_(1481);let r=(()=>{class s{constructor(u,c,f,w){this.fb=u,this.route=c,this.service=f,this.sanitizer=w,this.isThumbsUpClicked=!1,this.thumbsUpCount=0,this.isThumbsDownClicked=!1,this.title="PAPAYA",this.rating=0,this.viewedVideo={id:0,videoID:"",img:"",title:"",channelName:"",date:"",views:0,smallImg:"",subscribers:0}}handleThumbsUpClick(){this.isThumbsUpClicked=!this.isThumbsUpClicked}handleThumbsDownClick(){this.isThumbsDownClicked=!this.isThumbsDownClicked}ngOnInit(){this.route.queryParams.subscribe(u=>{this.getVidByID(u.id)})}getVidByID(u){this.viewedVideo=this.service.GetVideoById(u),this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+this.viewedVideo.videoID)}comment(u){}onStarClick(u){this.rating=u}saveReview(){}static#t=this.\u0275fac=function(c){return new(c||s)(t.Y36(n.qu),t.Y36(b.gz),t.Y36(v.B),t.Y36(i.H7))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-show-video"]],decls:31,vars:10,consts:[[1,"container-fluid"],["id","video-container"],["width","100%","height","100%","frameborder","0","allowfullscreen","",3,"src"],["id","video-info"],[1,"row"],["id","videoTitle"],[1,"col"],["id","SvgInCard","alt","",3,"src"],["id","likeSave",1,"col"],[1,"like"],[1,"fa","fa-thumbs-up",3,"click"],[1,"thumbs-up-count"],[1,"divider"],[1,"dislike"],[1,"fa","fa-thumbs-down",3,"click"],["id","download",1,"col"],["type","button",1,"btn2"]],template:function(c,f){1&c&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"iframe",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",4)(9,"div",6)(10,"span")(11,"p"),t._UZ(12,"img",7),t._uU(13),t.qZA()()(),t.TgZ(14,"div",8)(15,"div",9)(16,"i",10),t.NdJ("click",function(){return f.handleThumbsUpClick()}),t.qZA(),t.TgZ(17,"span",11),t._uU(18),t.qZA()(),t._UZ(19,"div",12),t.TgZ(20,"div",13)(21,"i",14),t.NdJ("click",function(){return f.handleThumbsDownClick()}),t.qZA()()(),t.TgZ(22,"div",15)(23,"button",16),t._uU(24," Share \u21d7"),t.qZA(),t.TgZ(25,"button",16),t._uU(26," Download "),t.qZA(),t.TgZ(27,"button",16),t._uU(28," Save \u{1f4e5}"),t.qZA(),t.TgZ(29,"button",16),t._uU(30," Subsrcibe \u27b2"),t.qZA()()()()()),2&c&&(t.xp6(2),t.Q6J("src",f.videoUrl,t.uOi),t.xp6(5),t.Oqu(f.viewedVideo.title),t.xp6(5),t.Q6J("src",f.viewedVideo.smallImg,t.LSH),t.xp6(1),t.AsE(" ",f.viewedVideo.channelName," -- ",f.viewedVideo.subscribers," SUBSCRIBERS "),t.xp6(3),t.ekj("clicked",f.isThumbsUpClicked),t.xp6(2),t.hij("",f.viewedVideo.likes," Like"),t.xp6(3),t.ekj("clicked",f.isThumbsUpClicked))},styles:[".container-fluid[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;height:100%;overflow:hidden;background:linear-gradient(180deg,#2B2F53 0%,#1D1C34 34%)}#video-container[_ngcontent-%COMP%]{margin:15px;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:10px;box-shadow:0 0 10px #0009}#video-info[_ngcontent-%COMP%]{margin-top:20px;padding:0 20px}#videoTitle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a59f9f;text-transform:uppercase}.card[_ngcontent-%COMP%]{margin-bottom:25px;background:linear-gradient(180deg,#a1a8da 0%,#7d7b9e 34%)}body[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}#avg-rating[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.rating-stars[_ngcontent-%COMP%]{font-size:24px}.btn[_ngcontent-%COMP%]{margin-right:10px}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%}.comment-form[_ngcontent-%COMP%]{margin-top:20px}.SubsrcibeButton[_ngcontent-%COMP%]{padding:5px;background:#1D1C34;border-color:#1d1c34;color:#fff;border-radius:5px}.SubsrcibeButton[_ngcontent-%COMP%]:hover{background:#3a3864;border-color:#3a3864}@media (max-width: 768px){#video-info[_ngcontent-%COMP%]{padding:0 15px}}#likeSave[_ngcontent-%COMP%]{display:flex;align-items:center}.thumbs-up-button[_ngcontent-%COMP%]{font-size:20px;padding:8px;cursor:pointer;background-color:#000;color:#fff;border:none;border-radius:4px;margin-right:8px;transition:background-color .3s ease}.like[_ngcontent-%COMP%]{background:rgb(92,36,98);border-top-left-radius:5px;border-bottom-left-radius:5px;padding:5px}.dislike[_ngcontent-%COMP%]{background:rgb(92,36,98);border-top-right-radius:5px;border-bottom-right-radius:5px;padding:5px}.thumbs-up-count[_ngcontent-%COMP%]{font-size:14px;padding:0 5px;color:#8a8888}#likeSave[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#fff;cursor:pointer;font-size:20px}#likeSave[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]:hover{color:#8fc4e8}#likeSave[_ngcontent-%COMP%]   .fa.clicked[_ngcontent-%COMP%]{color:#3498db}.divider[_ngcontent-%COMP%]{height:20px;width:1px;background-color:#ccc}#video-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;padding-top:56.25%}#video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.btn2[_ngcontent-%COMP%]{border-style:none;margin:2px;border-radius:10px;background:rgb(92,36,98);color:#fff;padding:8px}.btn2[_ngcontent-%COMP%]:hover{background:rgb(105,50,111);color:#fff;padding:8px}"]})}return s})(),d=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-viewvideo"]],decls:6,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-xl-8","col-md-12","col-sm-12"],[1,"col-xl-4","col-md-12","col-sm-12"]],template:function(c,f){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-show-video"),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-rightbarvideos"),t.qZA()()())},dependencies:[g,r],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.container-fluid[_ngcontent-%COMP%]{height:100%;width:100%;margin:90px 0 0;padding:0;overflow:hidden;background:linear-gradient(180deg,#2B2F53 0%,#1D1C34 34%)}"]})}return s})();class x{constructor(){this.id=1,this.img="",this.title="",this.channelName="",this.date="",this.views=0,this.smallImg="",this.videoTime=""}}var m=_(4032);function e(s,y){if(1&s){const u=t.EpF();t.TgZ(0,"div",24)(1,"i",25),t.NdJ("click",function(){t.CHM(u);const f=t.oxw();return t.KtG(f.removeAlert())}),t._uU(2,"x"),t.qZA(),t.TgZ(3,"strong"),t._uU(4,"Alert!"),t.qZA(),t._uU(5," The selected image dimensions are too large. Please choose an image with dimensions less than 16:9 ratio. "),t.qZA()}}function o(s,y){if(1&s&&t._UZ(0,"img",26),2&s){const u=t.oxw();t.Q6J("src",u.selectedImage,t.LSH)}}const C=function(s){return{"container-fluid":!0,arabic:s}},R=(_(3435),[{path:"all",component:l},{path:"view",component:d},{path:"bar",component:g},{path:"add",component:(()=>{class s{constructor(u,c){this.fb=u,this.service=c,this.video=[],this.videoTitle="",this.videoDescription="",this.showAlert=!1,this.currentDate=new Date,this.selectedImage="./assets/selected.jpg",this.showProgressBar=!1,this.message="",this.error="",this.messageDosageEmpty=!1,this.isSomethingEmpty=!1,this.messageCategoryEmpty=!1,this.dosageAlreadyExist=!1,this.categoryAleadyExist=!1,this.vid=new x,this.myForm=this.fb.group({img:["",n.kI.required],title:["",n.kI.required],description:["",n.kI.required],channelName:["",n.kI.required],date:["",n.kI.required],smallImg:["",n.kI.required],videoTime:["",n.kI.required]})}ngOnChanges(){this.language=localStorage.getItem("lang")}isArabic(){return"ar"==localStorage.getItem("lang")}onFieldChange(u,c){}ngOnInit(){}removeAlert(){this.showAlert=!1}onFileChange(u){const f=u.target.files?.[0];if(f){const I=new Image;I.onload=()=>{const E=I.height/I.width,L=document.createElement("canvas"),U=L.getContext("2d");if(U)if(L.width=1920,L.height=1080,Math.abs(E-.56)<.01)U.drawImage(I,0,0,1920,1080),this.selectedImage=L.toDataURL("image/png");else{const B=Math.min(1920/I.width,1080/I.height),F=I.width*B,W=I.height*B,z=(1920-F)/2,H=(1080-W)/2;U.fillStyle="black",U.fillRect(0,0,1920,1080),U.drawImage(I,z,H,F,W),this.selectedImage=L.toDataURL("image/png")}else console.error("Unable to get 2D rendering context.")},I.src=URL.createObjectURL(f)}}onSubmit(){this.error="",this.message=""}static#t=this.\u0275fac=function(c){return new(c||s)(t.Y36(n.QS),t.Y36(v.B))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-addvideo"]],features:[t.TTD],decls:50,vars:33,consts:[[3,"ngClass"],[1,"upload-container","cont1"],[3,"formGroup"],[1,"form-group"],["for","videoTitle"],["type","text","id","videoTitle","name","videoTitle","required","",3,"input"],["for","videoDescription"],["id","videoDescription","name","videoDescription","required","",3,"input"],["for","videoFile"],["type","file","id","videoFile","name","videoFile","accept","video/*","required","",3,"input"],["for","imageFile"],["type","file","id","imageFile","name","imageFile","accept","image/*","required","",3,"change","input"],["id","customAlert","class","alert",4,"ngIf"],["alt","Selected Image","style","width: 200px;",3,"src",4,"ngIf"],["type","submit",3,"click"],[1,"upload-container","cont2"],[1,"list-container"],[1,"div-list"],[1,"thumbnail",3,"src"],[1,"flex-div"],[1,"col","col1"],["alt","",3,"src"],[1,"col","col2"],[1,"vid-info"],["id","customAlert",1,"alert"],[1,"closebtn",3,"click"],["alt","Selected Image",2,"width","200px",3,"src"]],template:function(c,f){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2)(6,"div",3)(7,"label",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",5),t.NdJ("input",function(){let p;return f.onFieldChange("title",null==(p=f.myForm.get("title"))?null:p.value)}),t.qZA()(),t.TgZ(11,"div",3)(12,"label",6),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"textarea",7),t.NdJ("input",function(){let p;return f.onFieldChange("title",null==(p=f.myForm.get("title"))?null:p.value)}),t.qZA()(),t.TgZ(16,"div",3)(17,"label",8),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"input",9),t.NdJ("input",function(){let p;return f.onFieldChange("title",null==(p=f.myForm.get("title"))?null:p.value)}),t.qZA()(),t.TgZ(21,"div",3)(22,"label",10),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"input",11),t.NdJ("change",function(p){return f.onFileChange(p)})("input",function(){let p;return f.onFieldChange("title",null==(p=f.myForm.get("title"))?null:p.value)}),t.qZA()(),t.YNc(26,e,6,0,"div",12),t.YNc(27,o,1,1,"img",13),t.TgZ(28,"button",14),t.NdJ("click",function(){return f.onSubmit()}),t._uU(29),t.ALo(30,"translate"),t.qZA()()(),t.TgZ(31,"div",15)(32,"h1"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",16)(36,"div",17),t._UZ(37,"img",18),t.TgZ(38,"div",19)(39,"div",20),t._UZ(40,"img",21),t.qZA(),t.TgZ(41,"div",22)(42,"div",23)(43,"a"),t._uU(44,"htrrtth"),t.qZA(),t.TgZ(45,"p"),t._uU(46,"fdgdf"),t.qZA(),t.TgZ(47,"p"),t._uU(48),t.ALo(49,"date"),t.qZA()()()()()()()()),2&c&&(t.Q6J("ngClass",t.VKq(31,C,f.isArabic())),t.xp6(3),t.Oqu(t.lcZ(4,14,"ADDVIDEO.div1")),t.xp6(2),t.Q6J("formGroup",f.myForm),t.xp6(3),t.hij(" ",t.lcZ(9,16,"ADDVIDEO.vidTitle")," "),t.xp6(5),t.Oqu(t.lcZ(14,18,"ADDVIDEO.VideoDescription")),t.xp6(5),t.Oqu(t.lcZ(19,20,"ADDVIDEO.SelectVideo")),t.xp6(5),t.Oqu(t.lcZ(24,22,"ADDVIDEO.SelectImage")),t.xp6(3),t.Q6J("ngIf",f.showAlert),t.xp6(1),t.Q6J("ngIf",f.selectedImage),t.xp6(2),t.Oqu(t.lcZ(30,24,"ADDVIDEO.UploadVideo")),t.xp6(4),t.Oqu(t.lcZ(34,26,"ADDVIDEO.div2")),t.xp6(4),t.Q6J("src",f.selectedImage,t.LSH),t.xp6(3),t.Q6J("src",f.selectedImage,t.LSH),t.xp6(8),t.hij("1k views \u25cf ",t.xi3(49,28,f.currentDate,"longDate"),""))},dependencies:[O.mk,O.O5,n._Y,n.JL,n.sg,O.uU,m.X$],styles:[".container-fluid[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:10px;overflow:hidden;background:linear-gradient(180deg,#2B2F53 0%,#1D1C34 34%);display:grid;grid-template-columns:repeat(auto-fit,minmax(450px,1fr));grid-column-gap:0px;grid-row-gap:10px}.arabic[_ngcontent-%COMP%]{direction:rtl}*[_ngcontent-%COMP%]{box-sizing:border-box}.upload-container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;margin:100px auto auto;padding:20px;box-shadow:0 0 10px #0000001a;border-radius:8px;background:linear-gradient(180deg,rgba(86,89,111,0) 0%,rgba(72,70,122,.34) 54%)}.cont2[_ngcontent-%COMP%]{max-width:550px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}#videoTitle[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border:1px solid #ddd;border-radius:4px;width:100%;box-sizing:border-box}#videoFile[_ngcontent-%COMP%], #imageFile[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border-radius:4px;width:100%;color:#f5f5f5;background:#9668f155;cursor:pointer}textarea[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border:1px solid #ddd;border-radius:4px;width:100%}button[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border-radius:4px;width:100%;background:#9668f166;color:#fff;cursor:pointer;border-style:none;transition:transform .3s ease}button[_ngcontent-%COMP%]:hover{background:#6c0aad;transform:scale(1.05)}h1[_ngcontent-%COMP%]{color:#dadada;font-family:Georgia,Times New Roman,Times,serif;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e0e0e0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.div-list[_ngcontent-%COMP%]{background:linear-gradient(168.44deg,#2E335A 1.62%,#1C1B33 95.72%);border-radius:16px;box-shadow:0 4px 20px #1a025a33}.div-list[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:100%;border-top-right-radius:15px;border-top-left-radius:15px}.div-list[_ngcontent-%COMP%]   .flex-div[_ngcontent-%COMP%]{align-items:flex-start;display:flex;margin-top:7px}.flex-div[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]{margin-left:10px;flex:1}.flex-div[_ngcontent-%COMP%]   .col2[_ngcontent-%COMP%]{flex:6}.div-list[_ngcontent-%COMP%]   .flex-div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none;color:#fff}.div-list[_ngcontent-%COMP%]   .flex-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#959191}.div-list[_ngcontent-%COMP%]   .flex-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;margin-right:10px}.alert[_ngcontent-%COMP%]{padding:10px;background-color:#f44336;color:#fff;margin-bottom:15px;border-radius:5px}.closebtn[_ngcontent-%COMP%]{margin-left:15px;color:#fff;font-weight:700;float:right;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn[_ngcontent-%COMP%]:hover{color:#f5b5b5}.alert[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}"]})}return s})()}]);let A=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(R),b.Bz]})}return s})();var S=_(9561);let D=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[O.ez,S.SharedModuleModule,A,n.UX,m.aw]})}return s})()},6958:Z=>{function M(){}M.prototype={on:function(_,O,b){var t=this.e||(this.e={});return(t[_]||(t[_]=[])).push({fn:O,ctx:b}),this},once:function(_,O,b){var t=this;function a(){t.off(_,a),O.apply(b,arguments)}return a._=O,this.on(_,a,b)},emit:function(_){for(var O=[].slice.call(arguments,1),b=((this.e||(this.e={}))[_]||[]).slice(),t=0,a=b.length;t<a;t++)b[t].fn.apply(b[t].ctx,O);return this},off:function(_,O){var b=this.e||(this.e={}),t=b[_],a=[];if(t&&O)for(var l=0,v=t.length;l<v;l++)t[l].fn!==O&&t[l].fn._!==O&&a.push(t[l]);return a.length?b[_]=a:delete b[_],this}},Z.exports=M},8501:(Z,M)=>{"use strict";M.__esModule=!0;var _=function(){function t(a,l){for(var v=0;v<l.length;v++){var h=l[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}return function(a,l,v){return l&&t(a.prototype,l),v&&t(a,v),a}}(),b=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function O(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this.colors=a.colors,this.parent=a.parent,this.context=a.context,this.isDirty=!0}return _(t,[{key:"revalidate",value:function(){this.isDirty=!0}},{key:"setColors",value:function(l){this.colors=l}},{key:"paint",value:function(){if(this.isDirty){var l=this.parent,v=this.context;if(this.colors&&this.colors.length?(v.fillStyle=this.colors[0],v.fillRect(0,0,l.width,l.height)):v.clearRect(0,0,l.width,l.height),this.colors&&this.colors.length>1){var n=l.width/32,i=Math.ceil(l.height/n);v.fillStyle=this.colors[1];for(var r=0;r<32;r+=1)for(var d=0;d<i;d+=1)(r+d)%2==0&&v.fillRect(r*n,d*n,n,n)}this.isDirty=!1}}}]),t}();b.create=function(t){return new b(t)},M.default=b},3535:(Z,M,_)=>{"use strict";M.__esModule=!0;var O=function(){function n(i,r){for(var d=0;d<r.length;d++){var x=r[d];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(i,x.key,x)}}return function(i,r,d){return r&&n(i.prototype,r),d&&n(i,d),i}}(),t=v(_(7052)),l=v(_(2683));function v(n){return n&&n.__esModule?n:{default:n}}var g=function(){function n(i){var r=this;if(function h(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),this.width=0,this.height=0,this.hasLoaded=!1,this.src=null,this.listeners=l.default.create(),i){if("string"==typeof i){this.src=i;var d=document.createElement("img");d.src=this.src,i=d}else this.src=i.src;this.source=i,(0,t.default)(i,function(x){x?r.notify("error",x):(r.hasLoaded=!0,r.width=i.naturalWidth,r.height=i.naturalHeight,r.notify("load",r))})}}return O(n,[{key:"getAspectRatio",value:function(){return this.hasLoaded?this.width/this.height:1}},{key:"notify",value:function(r,d){var x=this.listeners;setTimeout(function(){x.notify(r,d)},0)}},{key:"on",value:function(r,d){return this.listeners.on(r,d),this}},{key:"off",value:function(r,d){return this.listeners.off(r,d),this}}]),n}();g.create=function(n){return new g(n)},M.default=g},3280:(Z,M,_)=>{"use strict";M.__esModule=!0;var O=function(){function h(g,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(g,r.key,r)}}return function(g,n,i){return n&&h(g.prototype,n),i&&h(g,i),g}}(),t=function a(h){return h&&h.__esModule?h:{default:h}}(_(2945)),v=function(){function h(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function l(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")})(this,h),this.bounds=t.default.create(0,0,0,0),this.image=g.image||null,this.parent=g.parent,this.context=g.context}return O(h,[{key:"setImage",value:function(n){this.image=n}},{key:"revalidate",value:function(){var n=this.parent,i=this.image,r=this.bounds;i&&(i.width/i.height>=n.width/n.height?(r.width=n.width,r.height=Math.ceil(i.height/i.width*n.width),r.x=0,r.y=Math.floor(.5*(n.height-r.height))):(r.width=Math.ceil(i.width/i.height*n.height),r.height=n.height,r.x=Math.floor(.5*(n.width-r.width)),r.y=0))}},{key:"paint",value:function(){var i=this.image,r=this.bounds;i&&i.hasLoaded&&this.context.drawImage(i.source,0,0,i.width,i.height,r.x,r.y,r.width,r.height)}}]),h}();v.create=function(h){return new v(h)},M.default=v},2683:(Z,M)=>{"use strict";M.__esModule=!0;var _=function(){function t(a,l){for(var v=0;v<l.length;v++){var h=l[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}return function(a,l,v){return l&&t(a.prototype,l),v&&t(a,v),a}}(),b=function(){function t(a){(function O(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this.events={}}return _(t,[{key:"on",value:function(l,v){return this.events[l]||(this.events[l]=[]),-1===this.events[l].indexOf(v)&&this.events[l].push(v),this}},{key:"off",value:function(l,v){if(this.events[l]){var h=this.events[l].indexOf(v);-1!==h&&this.events[l].splice(h,1)}return this}},{key:"notify",value:function(l,v){var h=this;this.events[l]&&this.events[l].forEach(function(g){g.call(h,v)})}},{key:"clearAll",value:function(){this.events={}}}]),t}();b.create=function(t){return new b(t)},M.default=b},2945:(Z,M)=>{"use strict";M.__esModule=!0;var _=function(){function t(a,l){for(var v=0;v<l.length;v++){var h=l[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}return function(a,l,v){return l&&t(a.prototype,l),v&&t(a,v),a}}(),b=function(){function t(a,l,v,h){(function O(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this._x=a,this._y=l,this._width=v,this._height=h}return _(t,[{key:"copy",value:function(l){return this._x=l.x,this._y=l.y,this._width=l.width,this._height=l.height,this}},{key:"clone",value:function(){return t.create(this._x,this._y,this._width,this._height)}},{key:"round",value:function(){var l=this._x,v=this._y;return this._x=Math.round(l),this._y=Math.round(v),l-=this._x,v-=this._y,this._width=Math.round(this._width+l),this._height=Math.round(this._height+v),this}},{key:"isInside",value:function(l){return l.x>=this.left&&l.y>=this.top&&l.x<this.right&&l.y<this.bottom}}]),t}();Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a}},y:{get:function(){return this._y},set:function(a){this._y=a}},centerX:{get:function(){return this._x+.5*this._width},set:function(a){this._x=a-.5*this._width}},centerY:{get:function(){return this._y+.5*this._height},set:function(a){this._y=a-.5*this._height}},width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}},left:{get:function(){return this._x},set:function(a){this._width=this._x+this._width-a,this._x=a}},top:{get:function(){return this._y},set:function(a){this._height=this._y+this._height-a,this._y=a}},right:{get:function(){return this._x+this._width},set:function(a){this._width=a-this._x}},bottom:{get:function(){return this._y+this._height},set:function(a){this._height=a-this._y}},aspectRatio:{get:function(){return this._width/this._height}}}),b.create=function(t,a,l,v){return new b(t,a,l,v)},M.default=b},8679:(Z,M,_)=>{"use strict";M.__esModule=!0;var O=function(){function h(g,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(g,r.key,r)}}return function(g,n,i){return n&&h(g.prototype,n),i&&h(g,i),g}}(),t=function a(h){return h&&h.__esModule?h:{default:h}}(_(2945)),v=function(){function h(g){(function l(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")})(this,h),this.target=g.target||null,this.bounds=t.default.create(0,0,0,0),this.boundsPx=t.default.create(0,0,0,0),this.region=t.default.create(0,0,0,0),this.initialOpts={x:g.x,y:g.y,width:g.width,height:g.height},this.aspectRatio=g.aspectRatio,this.minWidth=void 0!==g.minWidth?g.minWidth:100,this.minHeight=void 0!==g.minHeight?g.minHeight:100,this.boundsMinWidth=0,this.boundsMinHeight=0,this._delta={x:0,h:0}}return O(h,[{key:"getBoundsLengthForRegion",value:function(n){return n/this.region.width*this.width}},{key:"moveBy",value:function(n,i){var r=this.bounds,d=this.target;return r.x=Math.min(Math.max(r.x+n,d.bounds.x),d.bounds.x+d.bounds.width-r.width),r.y=Math.min(Math.max(r.y+i,d.bounds.y),d.bounds.y+d.bounds.height-r.height),this.updateRegionFromBounds()}},{key:"resizeBy",value:function(n,i,r){var d=this._delta,x=this.aspectRatio,m=this.bounds,e=this.boundsMinWidth,o=this.boundsMinHeight,C=this.target;switch("n"===r[0]?i=Math.min(i,this.top-C.bounds.top):"s"===r[0]&&(i=Math.min(i,C.bounds.bottom-this.bottom)),"w"===r[1]?n=Math.min(n,this.left-C.bounds.left):"e"===r[1]&&(n=Math.min(n,C.bounds.right-this.right)),d=function k(P,R){return d.width=m.width+P,d.height=m.height+R,d.width=Math.max(e,d.width),d.height=Math.max(o,d.height),x&&(d.width/d.height>x?d.width=d.height*x:d.height=d.width/x),d.width-=m.width,d.height-=m.height,d}(n,i),r){case"nw":this.left-=d.width,this.top-=d.height;break;case"ne":this.right+=d.width,this.top-=d.height;break;case"sw":this.left-=d.width,this.bottom+=d.height;break;case"se":this.right+=d.width,this.bottom+=d.height}return this.updateRegionFromBounds()}},{key:"autoSizeRegion",value:function(){var n=this.target,i=this.region,r=this.aspectRatio,d=this.initialOpts,x=i.x,m=i.y,e=i.width,o=i.height;return i.x=void 0!==d.x?d.x:0,i.y=void 0!==d.y?d.y:0,i.width=void 0!==d.width?d.width:n.image.width,i.height=void 0!==d.height?d.height:n.image.height,r&&(i.width/i.height>r?i.width=i.height*r:i.height=i.width/r),void 0===d.x&&(i.centerX=.5*n.image.width),void 0===d.y&&(i.centerY=.5*n.image.height),i.round(),this.updateBoundsFromRegion(),i.x!==x||i.y!==m||i.width!==e||i.height!==o}},{key:"updateRegionFromBounds",value:function(){var n=this.target,i=this.region,r=this.bounds,d=i.x,x=i.y,m=i.width,e=i.height;return i.x=n.image.width*(r.x-n.bounds.x)/n.bounds.width,i.y=n.image.height*(r.y-n.bounds.y)/n.bounds.height,i.width=n.image.width*(r.width/n.bounds.width),i.height=n.image.height*(r.height/n.bounds.height),i.round(),i.x!==d||i.y!==x||i.width!==m||i.height!==e}},{key:"updateBoundsFromRegion",value:function(){var n=this.target,i=this.region,r=this.bounds;n.image&&(r.x=n.bounds.x+n.bounds.width*(i.x/n.image.width),r.y=n.bounds.y+n.bounds.height*(i.y/n.image.height),r.width=n.bounds.width*(i.width/n.image.width),r.height=n.bounds.height*(i.height/n.image.height)),this.boundsMinWidth=this.getBoundsLengthForRegion(this.minWidth),this.boundsMinHeight=this.getBoundsLengthForRegion(this.minHeight)}},{key:"isInside",value:function(n){return this.bounds.isInside(n)}}]),h}();Object.defineProperties(v.prototype,{x:{get:function(){return this.bounds.x},set:function(g){this.bounds.x=g}},y:{get:function(){return this.bounds.y},set:function(g){this.bounds.y=g}},width:{get:function(){return this.bounds.width},set:function(g){this.bounds.width=g}},height:{get:function(){return this.bounds.height},set:function(g){this.bounds.height=g}},left:{get:function(){return this.bounds.x},set:function(g){this.bounds.left=g}},top:{get:function(){return this.bounds.y},set:function(g){this.bounds.top=g}},right:{get:function(){return this.bounds.right},set:function(g){this.bounds.right=g}},bottom:{get:function(){return this.bounds.bottom},set:function(g){this.bounds.bottom=g}}}),v.create=function(h){return new v(h)},M.default=v},8550:(Z,M,_)=>{"use strict";M.__esModule=!0;var O=function(){function x(m,e){for(var o=0;o<e.length;o++){var C=e[o];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(m,C.key,C)}}return function(m,e,o){return e&&x(m.prototype,e),o&&x(m,o),m}}(),t=i(_(5424)),l=i(_(2683)),h=i(_(8679)),n=i(_(2945));function i(x){return x&&x.__esModule?x:{default:x}}var d=function(){function x(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function r(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")})(this,x),this.selection=h.default.create(m),this.parent=m.parent,this.context=m.context,this.context.setLineDash=this.context.setLineDash||function(){},this.target=m.target;var e=m.handle||{};e.length=e.handleLength||32,e.depth=e.depth||3,e.size=e.size||2*e.length,e.color=e.color||"rgba(255, 255, 255, 1.0)",e.activeColor=e.activeColor||"rgba(255, 0, 160, 1.0)",this.handleOpts=e,this.listeners=l.default.create(),this.touch=(0,t.default)(this.parent.canvas),this.activeRegion=null,this.downBounds=n.default.create(0,0,0,0),this.touch.on("down",this.onInputDown.bind(this)).on("move",this.onInputMove.bind(this)).on("up",this.onInputUpOrCancel.bind(this)).on("cancel",this.onInputUpOrCancel.bind(this))}return O(x,[{key:"onInputDown",value:function(e){var o=this.findHitRegion(e);o&&(e.source.preventDefault(),this.activeRegion=o,this.setCursor(o),this.downBounds.copy(this.selection.bounds),this.listeners.notify("start",this.selection.region))}},{key:"onInputMove",value:function(e){var o=this.activeRegion;if(o){e.source.preventDefault();var k=this.selection,P=!1;if(k.bounds.copy(this.downBounds),"move"===o)(P=k.moveBy(e.tx,e.ty))&&this.listeners.notify("move",this.selection.region);else{var R=o.substring(0,2);(P=k.resizeBy("w"===R[1]?-e.tx:e.tx,"n"===R[0]?-e.ty:e.ty,R))&&this.listeners.notify("resize",this.selection.region)}P&&this.listeners.notify("change",this.selection.region)}else{var C=this.findHitRegion(e);C?(e.source.preventDefault(),this.setCursor(C)):this.resetCursor()}}},{key:"onInputUpOrCancel",value:function(e){e.source.preventDefault(),this.activeRegion&&(this.activeRegion=null,this.resetCursor(),this.listeners.notify("end",this.selection.region))}},{key:"findHitRegion",value:function(e){var o=null,C=Number.MAX_VALUE,k=this.isWithinNorthWestHandle(e);return!1!==k&&k<C&&(C=k,o="nw-resize"),!1!==(k=this.isWithinNorthEastHandle(e))&&k<C&&(C=k,o="ne-resize"),!1!==(k=this.isWithinSouthWestHandle(e))&&k<C&&(C=k,o="sw-resize"),!1!==(k=this.isWithinSouthEastHandle(e))&&k<C&&(C=k,o="se-resize"),o||(this.isWithinBounds(e)?"move":null)}},{key:"on",value:function(e,o){return this.listeners.on(e,o),this}},{key:"off",value:function(e,o){return this.listeners.off(e,o),this}},{key:"setCursor",value:function(e){this.parent.canvas.style.cursor!==e&&(this.parent.canvas.style.cursor=e)}},{key:"resetCursor",value:function(){this.setCursor("auto")}},{key:"isWithinRadius",value:function(e,o,C,k,P){var A=e-C,S=o-k,D=A*A+S*S;return D<P*P&&D}},{key:"isWithinNorthWestHandle",value:function(e){return this.isWithinRadius(e.x,e.y,this.selection.left,this.selection.top,this.getHandleRadius())}},{key:"isWithinNorthEastHandle",value:function(e){return this.isWithinRadius(e.x,e.y,this.selection.right,this.selection.top,this.getHandleRadius())}},{key:"isWithinSouthWestHandle",value:function(e){return this.isWithinRadius(e.x,e.y,this.selection.left,this.selection.bottom,this.getHandleRadius())}},{key:"isWithinSouthEastHandle",value:function(e){return this.isWithinRadius(e.x,e.y,this.selection.right,this.selection.bottom,this.getHandleRadius())}},{key:"isWithinBounds",value:function(e){return this.selection.isInside(e)}},{key:"getHandleRadius",value:function(){return this.handleOpts.size/2}},{key:"onImageLoad",value:function(){this.autoSizeRegionAndNotify()}},{key:"setAspectRatio",value:function(e){this.selection.aspectRatio=e,this.autoSizeRegionAndNotify()}},{key:"autoSizeRegionAndNotify",value:function(){this.selection.autoSizeRegion()&&this.listeners.notify("change",this.selection.region)}},{key:"revalidate",value:function(){this.selection.updateBoundsFromRegion()}},{key:"paint",value:function(){this.selection.boundsPx.copy(this.selection.bounds).round(),this.paintOutside(),this.paintInside()}},{key:"paintOutside",value:function(){var e=this.selection.boundsPx,o=this.context,C=this.target,k=C.bounds.x,P=C.bounds.y,R=C.bounds.width,A=C.bounds.right,S=C.bounds.bottom,D=e.x,s=e.y,y=e.height,u=e.right,c=e.bottom;o.fillStyle="rgba(0, 0, 0, 0.5)",o.fillRect(k,P,R,s-P),o.fillRect(k,s,D-k,y),o.fillRect(u,s,A-u,y),o.fillRect(k,c,R,S-c)}},{key:"paintInside",value:function(){var e=this.context,o=this.selection.boundsPx,C=this.activeRegion,k=this.handleOpts,P=Math.min(k.length,.5*o.width),R=Math.min(k.length,.5*o.height),A=k.depth,S=k.color,D=k.activeColor;e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(o.x+0,o.y,o.width-0,A),e.fillRect(o.x+0,o.bottom-A,o.width-0,A),e.fillRect(o.x,o.y+0,A,o.height-0),e.fillRect(o.right-A,o.y+0,A,o.height-0);var y="move"===C;e.fillStyle=y||"nw-resize"===C?D:S,e.fillRect(o.x,o.y,P,A),e.fillRect(o.x,o.y+A,A,R-A),e.fillStyle=y||"ne-resize"===C?D:S,e.fillRect(o.right-P,o.y,P,A),e.fillRect(o.right-A,o.y+A,A,R-A),e.fillStyle=y||"sw-resize"===C?D:S,e.fillRect(o.x,o.bottom-A,P,A),e.fillRect(o.x,o.bottom-R,A,R-A),e.fillStyle=y||"se-resize"===C?D:S,e.fillRect(o.right-P,o.bottom-A,P,A),e.fillRect(o.right-A,o.bottom-R,A,R-A),e.strokeStyle="rgba(255, 255, 255, 0.6)",e.setLineDash([2,3]),e.lineWidth=1,e.beginPath();var u=o.width/3,c=o.height/3;e.moveTo(o.x+u,o.y),e.lineTo(o.x+u,o.y+o.height),e.moveTo(o.x+2*u,o.y),e.lineTo(o.x+2*u,o.y+o.height),e.moveTo(o.x,o.y+c),e.lineTo(o.x+o.width,o.y+c),e.moveTo(o.x,o.y+2*c),e.lineTo(o.x+o.width,o.y+2*c),e.stroke(),e.closePath()}}]),x}();d.create=function(x){return new d(x)},M.default=d},1012:(Z,M)=>{"use strict";M.__esModule=!0,M.default=function _(O,b,t){var a=void 0;return function(){var l=this,v=arguments;clearTimeout(a),a=setTimeout(function(){a=null,t||O.apply(l,v)},b),t&&!a&&O.apply(l,v)}}},3435:(Z,M,_)=>{"use strict";var O=function(){function s(y,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,u,c){return u&&s(y.prototype,u),c&&s(y,c),y}}(),t=m(_(1012)),l=m(_(8501)),h=m(_(3280)),n=m(_(8550)),r=m(_(3535)),x=m(_(2683));function m(s){return s&&s.__esModule?s:{default:s}}var k=function(){function s(y){(function e(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")})(this,s),this.parent="string"==typeof y.parent?document.querySelector(y.parent):y.parent,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.boundsOpts=y.bounds||{width:"100%",height:"auto"},y.selection=y.selection||{},this.debounceResize=void 0===y.debounceResize||y.debounceResize,this.listeners=x.default.create(),this.parent.appendChild(this.canvas),this.backgroundLayer=l.default.create({parent:this,context:this.context,colors:y.backgroundColors||["#fff","#f0f0f0"]}),this.imageLayer=h.default.create({parent:this,context:this.context,image:this.image}),this.selectionLayer=n.default.create({parent:this,context:this.context,target:this.imageLayer,aspectRatio:y.selection.aspectRatio,minWidth:y.selection.minWidth,minHeight:y.selection.minHeight,x:y.selection.x,y:y.selection.y,width:y.selection.width,height:y.selection.height,handle:{color:y.selection.color,activeColor:y.selection.activeColor}});var u=this.listeners,c=this.paint.bind(this);this.selectionLayer.on("start",function(f){c(),u.notify("start",f)}).on("move",function(f){u.notify("move",f)}).on("resize",function(f){u.notify("resize",f)}).on("change",function(f){c(),u.notify("change",f)}).on("end",function(f){c(),u.notify("end",f)}),window.addEventListener("resize",this.debounceResize?(0,t.default)(this.revalidateAndPaint.bind(this),100):this.revalidateAndPaint.bind(this)),this.setImage(y.image,y.onInit),this.revalidateAndPaint()}return O(s,[{key:"on",value:function(u,c){return this.listeners.on(u,c),this}},{key:"off",value:function(u,c){return this.listeners.off(u,c),this}},{key:"revalidateAndPaint",value:function(){this.revalidate(),this.paint()}},{key:"revalidate",value:function(){var p,T,u=this.parent,c=this.image,f=this.boundsOpts.width,w=this.boundsOpts.height;p=D(f)?f:u&&R(f)?Math.round(u.clientWidth*A(f)/100):400,T=D(w)?w:R(w)?Math.round(p*A(w)/100):c&&c.hasLoaded&&function S(s){return"auto"===s}(w)?Math.floor(p/c.getAspectRatio()):300,this.resizeCanvas(p,T),this.backgroundLayer.revalidate(),this.imageLayer.revalidate(),this.selectionLayer.revalidate()}},{key:"paint",value:function(){var u=this.context;u.save(),u.scale(this.ratio,this.ratio),this.backgroundLayer.paint(),this.image&&this.image.hasLoaded&&(this.imageLayer.paint(),this.selectionLayer.paint()),u.restore()}},{key:"resizeCanvas",value:function(u,c){var f=this.canvas;this.ratio=window.devicePixelRatio||1,this.width=u,this.height=c,f.width=this.width*this.ratio,f.height=this.height*this.ratio}},{key:"setImage",value:function(u,c){var f=this,w=r.default.create(u).on("load",function(){f.selectionLayer.onImageLoad(),f.revalidateAndPaint(),c&&c()}).on("error",function(p){console.error(p)});this.imageLayer.setImage(w),this.image=w,this.revalidateAndPaint()}},{key:"getImage",value:function(){return this.image}},{key:"setAspectRatio",value:function(u){this.selectionLayer.setAspectRatio(u),this.revalidateAndPaint()}},{key:"setBounds",value:function(u){this.boundsOpts=u,this.revalidateAndPaint()}},{key:"setBackgroundColors",value:function(u){this.backgroundLayer.setColors(u),this.revalidateAndPaint()}}]),s}();function R(s){return!("string"!=typeof s||s.length<1)&&("%"===s[s.length-1]||void 0)}function A(s){return R(s)?s.slice(0,-1):0}function D(s){return"number"==typeof s&&Math.round(s)===s}k.create=function(s){return new k(s)},k.prototype.dispose=function P(){},Z.exports=k},7052:(Z,M)=>{"use strict";M.__esModule=!0;M.default=function O(b,t){if(!b.nodeName||"img"!==b.nodeName.toLowerCase())return t(new Error("First argument must an image element"));if(b.src&&b.complete&&void 0!==b.naturalWidth)return t(null,!0);if(b.addEventListener("load",function(){t(null,!1)}),b.addEventListener("error",function(l){t(new Error("Failed to load image '"+(b.src||"")+"'"))}),b.complete){var a=b.src;b.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",b.src=a}}},5424:(Z,M,_)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.CANCEL=M.UP=M.DRAG=M.MOVE=M.DOWN=void 0;var b=function t(r){return r&&r.__esModule?r:{default:r}}(_(6958)),a=function(d){return function(x,m){d.addEventListener(x,m)}};M.default=function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,x=new b.default,m={},e=a(d),o=null,C=null,S=function(p,T,I,E){var L=C||o;return{source:p,x:T,y:I,dx:L?T-L.x:0,dy:L?I-L.y:0,tx:o?T-o.x:0,ty:o?I-o.y:0,type:E}},D=function(p){var I=(p.target||p.srcElement).getBoundingClientRect();return S(p,p.clientX-I.left,p.clientY-I.top,"Mouse")},s=function(p){var T=p.target.getBoundingClientRect(),I=p.touches.length>0?p.touches[0]:p.changedTouches[0];return S(p,I.clientX-T.left,I.clientY-T.top,"Touch")},y=function(p){o=p,x.emit(v,p)},u=function(p){C=p,x.emit(h,p),o&&x.emit(g,p)},c=function(p){x.emit(n,p),o=null,C=null},f=function(p){x.emit(i,p),o=null,C=null};return e("mousedown",function(w){return y(D(w))}),e("touchstart",function(w){return y(s(w))}),e("mousemove",function(w){return u(D(w))}),e("touchmove",function(w){return u(s(w))}),e("mouseup",function(w){return c(D(w))}),e("touchend",function(w){return c(s(w))}),e("mouseout",function(w){return f(D(w))}),e("touchcancel",function(w){return f(s(w))}),m.on=function(p,T){return x.on(p,T),m},m.once=function(p,T){return x.once(p,T),m},m.off=function(p,T){return x.off(p,T),m},m};var v=M.DOWN="down",h=M.MOVE="move",g=M.DRAG="drag",n=M.UP="up",i=M.CANCEL="cancel"}}]);